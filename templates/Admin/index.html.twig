{% extends "base.html.twig" %}

{% block body %}



<main id="main" class="main">

  <div class="pagetitle">
    <h1>Data Tables</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item">Tables</li>
        <li class="breadcrumb-item active">Data</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

  
  <section class="section">
    <div class="row">
      <div class="col-lg-12">

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Datatables</h5>

            
            <!-- Table with stripped rows -->
            <table class="table datatable">
              <thead>
                <tr>
                  <th>
                    <b>id</b>
                  </th>
                  <th>ID</th>
                  <th>Type</th>
                  <th>Title</th>
                  <th>Contenu</th>
                  <th>validation</th>
                  <th>Likes</th>
                  <th>Dislikes</th>
                  <th>NbComments</th>
                  <th>Submit Date</th>
                  <th>update</th>
                  <th>del</th>
                  <th>valid</th>
                </tr>
              </thead>
              <tbody>
                {% for i in tabb %}
            <tr>
                <td>{{i.id}}</td>
                <td>{{i.IDPost}}</td>
                <td>{{i.TypePost}}</td>
                <td>{{i.TitlePost}}</td>
                <td>{{i.ContenuPost}}</td>
                <td>
                  {% if i.ValidationPost == 1 %}
                     <span style="background-color: green;color: white; padding: 2px 5px;border-radius: 3px;">Valid</span> 
                  {% else %}
                  <span style="background-color: red;color: white; padding: 2px 5px;border-radius: 3px;">Not Valid</span>
                  {% endif %}
              </td>
                <td>{{i.LikesPost}}</td>
                <td>{{i.DislikesPost}}</td>
                <td>{{i.NbCommentsPost}}</td>
                <td>{{i.MakedatePost.format('Y-m-d')}}</td>

                <td><a style="display: inline-block;padding: 6px 12px;margin: 2px;text-decoration: none;border-radius: 4px;color: #fff;background-color: #007bff;"  href="{{path('editpost',{'id':i.id})}}">Edit</a></td>
                <td><a style="display: inline-block;padding: 6px 12px;margin: 2px;text-decoration: none;border-radius: 4px;color: #fff;background-color: #dc3545;" href="{{path('deletepost',{'id':i.id})}}">Delete</a></td>
                <td><a style="display: inline-block;padding: 6px 12px;margin: 2px;text-decoration: none;border-radius: 4px;color: #fff;background-color: #28a745;" href="{{path('validpost',{'id':i.id})}}">Valider</a></td>
                
            </tr>
            {% endfor %}
          </tbody>
        </table>
      
        </div>
        </div>
        </section>
        <section class="section">
          <div class="card">
              <div class="card-body pb-0">
                  <h5 class="card-title">Post Types</h5>
      
                  <div id="postTypeChart" style="min-height: 400px;"></div>
      
                  <script>
                      document.addEventListener("DOMContentLoaded", () => {
                          const postTypes = [
                              { value: {{ nummed }}, name: 'Medicine' },
                              { value: {{ numlab }}, name: 'Lab Test' },
                              { value: {{ numequip }}, name: 'Equipments' },
                              { value: {{ numcouns }}, name: 'Free Counselling' },
                              { value: {{ numhart }}, name: 'Heart' }
                          ];
      
                          const chart = echarts.init(document.querySelector("#postTypeChart"));
                          chart.setOption({
                              tooltip: { trigger: 'item' },
                              legend: { orient: 'vertical', left: 'left' },
                              series: [{
                                  name: 'Post Types',
                                  type: 'pie',
                                  radius: ['40%', '70%'],
                                  avoidLabelOverlap: false,
                                  label: { show: false, position: 'center' },
                                  emphasis: { label: { show: true, fontSize: '18', fontWeight: 'bold' } },
                                  labelLine: { show: false },
                                  data: postTypes
                              }]
                          });
                      });
                  </script>
              </div>
          </div>
      </section>
      
           

</main>
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<script src="{{asset('assets/js/main.js')}}"></script>

{% endblock %}